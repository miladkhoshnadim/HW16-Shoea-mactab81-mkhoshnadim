<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mine peractice</title>
    <link rel="stylesheet" href="hw16-MP.css" />
    <!-- CSS only botstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <main class="main">
      <section class="pages">
        <div class="headP10">
          <a href="http://127.0.0.1:5500/hw16-p9-MyCart.html">
            <img src="/accets/Vectorleft.png" class="imageLeftP6" />
          </a>
          <span class="subjectP10">Check Out</span>
          <img
            src="/accets/icons8-view-more-64.png"
            width="50px"
            style="opacity: 0.7"
          />
        </div>
        <section class="MainP10">
          <div class="ShippingString">Shipping Addres</div>
          <div class="DivShipping">
            <img
              class="ImageLocationP10"
              src="/accets/icons8-location-64.png"
              alt=""
            />
            <div class="discriptionAddres" id="ChoosedAddress">
              <div class="discriptionCharacter">Home</div>
              <span class="divAdress">Tehran-Navab-EmamKhomeine-Rodacy</span>
            </div>
            <a href="http://127.0.0.1:5500/hw16-p11-adress.html">
            <img
              class="ImageEditP10"
              id="EditShipAdres"
              src="/accets/icons8-edit-32.png"
              alt=""
            /></a>
          </div>

          <div class="ShippingString">Order List</div>
          <div class="orderList" id="OrderListP10">
            <div class="anOrder">
              <img class="ImageProductP9" src="/accets/nike5.jpg" alt="" />
              <div class="discriptionOrder">
                <div class="discriptionCharacter">best shose</div>
                <div class="divSizeColor">
                  <span class="colorSignP9"></span>
                  <span> black </span>
                  <span>| size = 42</span>
                </div>
                <div class="DivPriceQuntityP9">
                  <span class="PriceP9">$98.00 </span>
                  <span class="divQuantityP10">
                    <span id="cunter" class=""> 0 </span>
                  </span>
                </div>
              </div>
            </div>
          </div>

          <div class="ShippingString">Choose Shipping</div>
          <div id="ChoosedShippingType">
            <div class="DivShipping">
              <img
                class="ImageshippingP10"
                src="/accets/icons8-truck-50.png"
                alt=""
              />
              <div class="Cho-Ship-Character">Choose Shipping Type</div>
              <a href="http://127.0.0.1:5500/hw16-p12-ship.html">
                <img
                  class="ImageEditP10"
                  src="/accets/icons8-chevron-right-30.png"
                  alt=""
                />
              </a>
            </div>
          </div>

          <div class="ShippingString">Promo Code</div>
          <div class="DivPromo">
            <input
              class="inputPromo"
              type="text"
              name=""
              id=""
              placeholder="Enter Promo Code"
            />
            <span class="PlusPromo">+</span>
          </div>

          <div class="DivFactor">
            <div class="displayfelex">
              <span class="AmountFactor felex">Amount</span
              ><span class="felex" id="TotalPriceOrders">$109.00</span>
            </div>
            <div class="totalShipping">
              <span class="AmountFactor felex">Shipping</span
              ><span class="felex" id="Shipping-Price">$10</span>
            </div>
            <div class="displayfelex">
              <span class="AmountFactor felex">Total</span
              ><span class="felex" id="TotalPriceShipping">$109.00</span>
            </div>
          </div>
        </section>
        <a href="http://127.0.0.1:5500/hw16-p13-payment.html">
        <button class="ButtonCountinuoPay">Countinuo to Payment =></button>
      </a>
      </section>
    </main>

    <script>
      const finalAdres = JSON.parse(window.localStorage.getItem("Adres"));
      const PriceShipping = JSON.parse(
        window.localStorage.getItem("PriceShipping")
      );
      const OrderListP10 = document.getElementById("OrderListP10");
      const ChoosedAddress = document.getElementById("ChoosedAddress");
      const ShippingPrice = document.getElementById("Shipping-Price");
      const TotalPriceShipping = document.getElementById("TotalPriceShipping");
      const EditShipAdres = document.getElementById("EditShipAdres");
      const TotalPriceOrders = document.getElementById("TotalPriceOrders");
      const ChoosedShippingType = document.getElementById("ChoosedShippingType");
      const ship = [
        ` <div class="DivShippingMain ">
              <img
                class="ImageExpresP11"
                src="/accets/icons8-strategy-news-24.png"
                alt=""
              />
              <div class="discriptionShipping">
                <div class="discriptionCharacter">Economy</div>
                <span class="divAdress">Estimated Arrival. Dec 20-23 </span>
              </div>
              <span class="priceShipping" id="Price1">$10</span>
              <a href="http://127.0.0.1:5500/hw16-p12-ship.html">
            <img
              class="ImageEditP10"
              id="EditShipAdres"
              src="/accets/icons8-edit-32.png"
              alt=""
            /></a>
            </div>`,
        ` <div class="DivShippingMain">
              <img
                class="ImageExpresP11"
                src="/accets/icons8-cardboard-box-64.png"
                alt=""
              />
              <div class="discriptionShipping">
                <div class="discriptionCharacter">Regular</div>
                <span class="divAdress">Estimated Arrival. Dec 20-22 </span>
              </div>
              <span class="priceShipping" id="Price2">$15</span>
              <a href="http://127.0.0.1:5500/hw16-p12-ship.html">
            <img
              class="ImageEditP10"
              id="EditShipAdres"
              src="/accets/icons8-edit-32.png"
              alt=""
            /></a>
            </div>`,
        `<div class="DivShippingMain">
              <img
                class="ImageExpresP11"
                src="/accets/icons8-cargo-64.png"
                alt=""
              />
              <div class="discriptionShipping">
                <div class="discriptionCharacter">Cargo</div>
                <span class="divAdress">Estimated Arrival. Dec 19-20 </span>
              </div>
              <span class="priceShipping" id="Price3">$20</span>
              <a href="http://127.0.0.1:5500/hw16-p12-ship.html">
            <img
              class="ImageEditP10"
              id="EditShipAdres"
              src="/accets/icons8-edit-32.png"
              alt=""
            /></a>
            </div>`,
        `<div class="DivShippingMain">
              <img
                class="ImageExpresP11"
                src="/accets/icons8-express-delivery-64.png"
                alt=""
              />
              <div class="discriptionShipping">
                <div class="discriptionCharacter">Express</div>
                <span class="divAdress">Estimated Arrival. Dec 18-19 </span>
              </div>
              <span class="priceShipping" id="Price4">$30</span>
              <a href="http://127.0.0.1:5500/hw16-p12-ship.html">
            <img
              class="ImageEditP10"
              id="EditShipAdres"
              src="/accets/icons8-edit-32.png"
              alt=""
            /></a>
            </div>`,
      ];
      let priceTotOrders = 0;

      ShippingPrice.innerHTML = `${PriceShipping}`;

      ChoosedAddress.innerHTML = `<div class="discriptionCharacter">${finalAdres.name}</div>
              <span class="divAdress">${finalAdres.Adres}</span>`;

      OrderListP10.innerHTML = ``;
      fetch(`http://localhost:3000/MyCart`)
        .then((response) => response.json())
        .then((data) => {
          data.forEach((e) => {
            priceTotOrders += +e.price.substring(1);
            OrderListP10.innerHTML += ` <div class="anOrder">
              <img class="ImageProductP9" src="${e.image}" alt="" />
              <div class="discriptionOrder">
                <div class="discriptionCharacter">${e.Type}</div>
                <div class="divSizeColor">
                  <span class="colorSignP9" style="background-color:${e.color} ;"></span>
                  <span>  ${e.color} </span>
                  <span>| size = ${e.size}</span>
                </div>
                <div class="DivPriceQuntityP9">
                  <span class="PriceP9">${e.price} </span>
                  <span class="divQuantityP10">
                    <span id="cunter" class=""> ${e.conter} </span>
                  </span>
                </div>
              </div>
            </div>`;
          });
          TotalPriceOrders.innerHTML = `$${priceTotOrders}.00`;
          TotalPriceShipping.innerHTML = `$${
            +PriceShipping.substring(1) + priceTotOrders
          }.00`;
        });

      // EditShipAdres.addEventListener("click", function () {
      //   location.href = "http://127.0.0.1:5500/hw16-p11-adress.html";
      // });

      ship.forEach((el, i) => {
        if (el.includes(PriceShipping)) {
          ChoosedShippingType.innerHTML=`${el}`
          console.log("The word Example is in the string.",i,el);
        }
      });
    </script>
  </body>
</html>
